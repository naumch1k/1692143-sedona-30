const interestedButton=document.querySelector(".interested__button"),modal=document.querySelector(".modal"),searchForm=modal.querySelector(".search-form"),moveIn=modal.querySelector("[name=move-in]"),moveOut=modal.querySelector("[name=move-out]"),adults=modal.querySelector("[name=adults]"),children=modal.querySelector("[name=children]"),adultsStorage=localStorage.getItem("adults"),childrenStorage=localStorage.getItem("children"),modalHidden=localStorage.getItem("modal-hidden");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("adults")}catch(e){isStorageSupport=!1}"true"==modalHidden&&isStorageSupport?modal.classList.add("modal_hidden"):modal.classList.remove("modal_hidden"),interestedButton.addEventListener("click",function(e){e.preventDefault(),modal.classList.contains("modal_hidden")?(modal.classList.remove("modal_hidden"),modal.classList.remove("modal_error"),localStorage.setItem("modal-hidden","false"),moveIn.focus({preventScroll:!0}),adultsStorage&&(adults.value=adultsStorage),childrenStorage&&(children.value=childrenStorage)):(modal.classList.add("modal_hidden"),localStorage.setItem("modal-hidden","true"))}),searchForm.addEventListener("submit",function(e){moveIn.value&&moveOut.value&&adults.value&&children.value?isStorageSupport&&(localStorage.setItem("adults",adults.value),localStorage.setItem("children",children.value)):(e.preventDefault(),modal.classList.remove("modal_error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal_error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modal.classList.contains("modal_hidden")||(e.preventDefault(),modal.classList.add("modal_hidden"),modal.classList.remove("modal_error")))});